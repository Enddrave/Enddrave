<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enddrave IoT Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>Device Telemetry</h2>
  <canvas id="iotChart"></canvas>

  <script>
    async function loadData() {
      const res = await fetch('https://enddrave-iot-api.azurewebsites.net/api/getLatestData');
      const data = await res.json();

      const temps = data.map(d => d.temp);
      const labels = data.map(d => d.device);

      new Chart(document.getElementById('iotChart'), {
        type: 'bar',
        data: {
          labels,
          datasets: [{ label: 'Temperature (Â°C)', data: temps, borderWidth: 2 }]
        }
      });
    }

    loadData();
  </script>
</body>
</html>
